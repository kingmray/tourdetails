function $$on$$module$src$helpers$$($target$$51$$,$callback$$52$$){$target$$51$$.addEventListener("change",$callback$$52$$,!1)}function $escapeForHTML$$module$src$helpers$$($s$$2$$){return $s$$2$$.replace(/[&<]/g,function($c$$){return"&"===$c$$?"&amp;":"&lt;"})};function $JSCompiler_StaticMethods_commentList$$($items$$){return $items$$.reduce(function($a$$,$item$$){return $a$$+('\n<li data-id="'+$item$$.id+'"'+($item$$.$completed$?' class="completed"':"")+">\n    <label>"+$escapeForHTML$$module$src$helpers$$($item$$.title)+'</label>\n    <button class="destroy"></button>\n</li>')},"")};function $JSCompiler_StaticMethods_Store$$module$src$store_prototype$find$$($JSCompiler_StaticMethods_Store$$module$src$store_prototype$find$self$$,$callback$$55$$){var $query$$2$$=$Empty$$module$src$item$Record$$,$comments$$2$$=$JSCompiler_StaticMethods_Store$$module$src$store_prototype$find$self$$.$a$(),$k$$;$callback$$55$$($comments$$2$$.filter(function($comment$$1$$){for($k$$ in $query$$2$$)if($query$$2$$[$k$$]!==$comment$$1$$[$k$$])return!1;return!0}))}
function $JSCompiler_StaticMethods_Store$$module$src$store_prototype$remove$$($JSCompiler_StaticMethods_Store$$module$src$store_prototype$remove$self$$,$query$$3$$,$callback$$56$$){var $k$$1$$,$comments$$3$$=$JSCompiler_StaticMethods_Store$$module$src$store_prototype$remove$self$$.$a$().filter(function($comment$$2$$){for($k$$1$$ in $query$$3$$)if($query$$3$$[$k$$1$$]!==$comment$$2$$[$k$$1$$])return!0;return!1});$JSCompiler_StaticMethods_Store$$module$src$store_prototype$remove$self$$.$b$($comments$$3$$);
$callback$$56$$&&$callback$$56$$($comments$$3$$)};function $JSCompiler_StaticMethods_bindAddItem$$($handler$$3$$,$el$$1$$){$$on$$module$src$helpers$$($el$$1$$,function($$jscomp$destructuring$var0_title$$8$$){var $postid_target$$53$$=$$jscomp$destructuring$var0_title$$8$$.target;$$jscomp$destructuring$var0_title$$8$$=$postid_target$$53$$.value.trim();$postid_target$$53$$=$postid_target$$53$$.getAttribute("data-postid");$$jscomp$destructuring$var0_title$$8$$&&$handler$$3$$($$jscomp$destructuring$var0_title$$8$$,$postid_target$$53$$)})}
function $JSCompiler_StaticMethods_bindAddItemToAll$$($JSCompiler_StaticMethods_bindAddItemToAll$self$$,$handler$$4$$){console.log($JSCompiler_StaticMethods_bindAddItemToAll$self$$.$a$);$JSCompiler_StaticMethods_bindAddItemToAll$self$$.$a$.forEach(function($el$$2$$){$JSCompiler_StaticMethods_bindAddItem$$($handler$$4$$,$el$$2$$)})};var $Empty$$module$src$item$Record$$={};function $Controller$$module$src$controller$$($store$$,$view$$3$$){this.$b$=$store$$;this.view=$view$$3$$;$JSCompiler_StaticMethods_bindAddItemToAll$$($view$$3$$,this.$c$.bind(this));this.$a$=null}
$Controller$$module$src$controller$$.prototype.removeItem=function $$Controller$$module$src$controller$$$$removeItem$($id$$4$$){var $$jscomp$this$$1$$=this;$JSCompiler_StaticMethods_Store$$module$src$store_prototype$remove$$(this.$b$,{id:$id$$4$$},function(){""===$$jscomp$this$$1$$.$a$&&""===$$jscomp$this$$1$$.$a$||$JSCompiler_StaticMethods_Store$$module$src$store_prototype$find$$($$jscomp$this$$1$$.$b$,$$jscomp$this$$1$$.view.$b$.bind($$jscomp$this$$1$$.view));$$jscomp$this$$1$$.$a$="";$$jscomp$this$$1$$.view.removeItem($id$$4$$)})};
function $JSCompiler_StaticMethods_binder$$($fn$$,$context$$){return function(){$fn$$.apply($context$$,arguments)}}
$Controller$$module$src$controller$$.prototype.$c$=function $$Controller$$module$src$controller$$$$$c$$($comment$$3$$,$theid$$){var $xhr$$=new XMLHttpRequest;$xhr$$.open("POST","comments/save");$xhr$$.setRequestHeader("Content-Type","application/json");$xhr$$.onreadystatechange=$JSCompiler_StaticMethods_binder$$(function(){if(200===$xhr$$.status){var $data$$31$$=JSON.parse($xhr$$.responseText);document.querySelectorAll(".new-comment").forEach(function($obj$$23$$){$obj$$23$$.value=""});var $commentListId$$1$$=
"#comment-list-"+$data$$31$$.id;console.log($commentListId$$1$$);document.querySelector($commentListId$$1$$).innerHTML=$JSCompiler_StaticMethods_commentList$$($data$$31$$.list)}else 200!==$xhr$$.status&&alert("Request failed.  Returned status of "+$xhr$$.status)},this);var $ret$$={};$ret$$.id=Date.now();$ret$$.title=$comment$$3$$;$ret$$.data=$theid$$;$ret$$.test="some";$xhr$$.send(JSON.stringify($ret$$))};var $store$$module$src$app$$=new function(){var $localStorage$$=window.localStorage,$liveComments$$;this.$a$=function $this$$a$$(){return $liveComments$$||JSON.parse($localStorage$$.getItem("tour-comments")||"[]")};this.$b$=function $this$$b$$($comments$$){$localStorage$$.setItem("tour-comments",JSON.stringify($liveComments$$=$comments$$))}};new $Controller$$module$src$controller$$($store$$module$src$app$$,new function(){this.$a$=document.querySelectorAll(".new-comment")});
